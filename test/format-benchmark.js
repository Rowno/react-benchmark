import test from 'ava'
import formatBenchmark from '../lib/format-benchmark'

test('formats a benchmark', t => {
  const fixture = {
    stats: {
      moe: 0.0000051306487763758425,
      rme: 3.1353553332052244,
      sem: 0.000002617677947130532,
      deviation: 0.000019413219231213135,
      mean: 0.00016363851082648617,
      sample: [
        0.00025766871165644174,
        0.0002411764705882353,
        0.00019154228855721393,
        0.0001837708830548926,
        0.00019093078758949882,
        0.00016666666666666666,
        0.00016414686825053996,
        0.00016846652267818574,
        0.00016149068322981365,
        0.00016356107660455487
      ],
      variance: 3.768730809191435e-10
    },
    times: {
      cycle: 0.08247380945654903,
      elapsed: 6.256,
      period: 0.00016363851082648617,
      timeStamp: 1517610881510
    },
    hz: 6111.030923890211
  }
  t.is(formatBenchmark(fixture), '6,111 ops/sec ±3.14% (10 runs sampled)')
})

test('handles a null hz', t => {
  const fixture = {
    stats: {
      moe: 0.0000051306487763758425,
      rme: 3.1353553332052244,
      sem: 0.000002617677947130532,
      deviation: 0.000019413219231213135,
      mean: 0.00016363851082648617,
      sample: [
        0.00025766871165644174,
        0.0002411764705882353,
        0.00019154228855721393,
        0.0001837708830548926,
        0.00019093078758949882,
        0.00016666666666666666,
        0.00016414686825053996,
        0.00016846652267818574,
        0.00016149068322981365,
        0.00016356107660455487
      ],
      variance: 3.768730809191435e-10
    },
    times: {
      cycle: 0.08247380945654903,
      elapsed: 6.256,
      period: 0.00016363851082648617,
      timeStamp: 1517610881510
    },
    hz: null
  }
  t.is(formatBenchmark(fixture), '0 ops/sec ±3.14% (10 runs sampled)')
})
